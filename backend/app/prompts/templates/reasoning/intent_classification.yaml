metadata:
  name: intent_classification
  version: "1.0.0"
  description: Classify user query intent for routing

variables:
  - name: query
    required: true

system_prompt: |
  You are a query classifier for a financial knowledge graph system.
  Classify user queries into one of three search strategies:
  - graph: Requires graph traversal and relationship analysis
  - vector: Requires semantic search in document embeddings
  - hybrid: Requires both graph and vector search

user_prompt: |
  Classify the following user query:

  Query: {query}

  Determine the best search strategy based on the query type:
  - Use "graph" for: relationship queries, company connections, supply chain, competitor analysis
  - Use "vector" for: document search, content retrieval, general information lookup
  - Use "hybrid" for: complex queries requiring both structure and semantics

output_schema:
  type: object
  properties:
    intent:
      type: string
      enum: [graph, vector, hybrid]
    confidence:
      type: number
      minimum: 0
      maximum: 1
    reasoning:
      type: string
